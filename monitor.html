<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SwitchHack â€” Status Monitor</title>
  <meta name="description" content="Live status dashboard for the Nintendo Switch hacking scene. Firmware versions, homebrew releases, and community pulse.">
  <meta property="og:title" content="SwitchHack â€” Status Monitor">
  <meta property="og:description" content="Live status dashboard for the Nintendo Switch hacking scene.">
  <meta property="og:url" content="https://switchhack.com/monitor.html">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="SwitchHack">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="SwitchHack â€” Status Monitor">
  <meta name="twitter:description" content="Live status dashboard for the Nintendo Switch hacking scene.">
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŽ®</text></svg>">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
            mono: ['JetBrains Mono', 'monospace'],
          },
        },
      },
    }
  </script>
  <link rel="stylesheet" href="styles.css">
  <style>
    /* â”€â”€ heartbeat â”€â”€ */
    @keyframes pulse-glow {
      0%   { box-shadow: 0 0 0 0 rgba(0,228,97,.5); }
      70%  { box-shadow: 0 0 0 5px rgba(0,228,97,0); }
      100% { box-shadow: 0 0 0 0 rgba(0,228,97,0); }
    }
    .pulse-dot {
      width: 7px; height: 7px; border-radius: 50%;
      background: #00e461;
      animation: pulse-glow 2s ease-out infinite;
      flex-shrink: 0;
    }

    /* â”€â”€ skeleton shimmer â”€â”€ */
    @keyframes shimmer {
      0%   { background-position: -400px 0; }
      100% { background-position: 400px 0; }
    }
    .skel {
      background: linear-gradient(90deg, rgba(255,255,255,.04) 25%, rgba(255,255,255,.08) 50%, rgba(255,255,255,.04) 75%);
      background-size: 800px 100%;
      animation: shimmer 1.5s ease-in-out infinite;
      border-radius: 3px;
    }

    /* â”€â”€ row grid (Finder list view) â”€â”€ */
    .feed-row {
      display: grid;
      grid-template-columns: 36px 1fr auto auto;
      column-gap: 12px;
      align-items: center;
      height: 42px;
      padding: 0 14px;
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    .feed-row:last-child { border-bottom: none; }
    @media (max-width: 640px) {
      .feed-row { grid-template-columns: 36px 1fr auto; }
      .col-meta { display: none !important; }
    }

    /* â”€â”€ tooltip â”€â”€ */
    .title-cell .tip { visibility: hidden; opacity: 0; transition: .1s; }
    .title-cell:hover .tip { visibility: visible; opacity: 1; }

    /* â”€â”€ scrollbar â”€â”€ */
    ::-webkit-scrollbar { width: 5px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: rgba(255,255,255,.08); border-radius: 3px; }
    ::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,.14); }

    /* â”€â”€ zebra striping â”€â”€ */
    .feed-row:nth-child(even) { background: rgba(255,255,255,.05); }

    /* â”€â”€ new-item indicator â”€â”€ */
    .row-new { box-shadow: inset 3px 0 0 #38bdf8; }

    /* â”€â”€ line clamp â”€â”€ */
    .line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }

    /* â”€â”€ risk indicators â”€â”€ */
    .risk-critical { color: #f87171; background: rgba(248,113,113,.12); border-color: rgba(248,113,113,.25); }
    .risk-warning  { color: #fbbf24; background: rgba(251,191,36,.12); border-color: rgba(251,191,36,.25); }
    .risk-safe     { color: #34d399; background: rgba(52,211,153,.12); border-color: rgba(52,211,153,.25); }

    /* â”€â”€ glass surface â”€â”€ */
    .glass {
      background: rgba(255,255,255,.05);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border: 1px solid rgba(255,255,255,.10);
    }
    .glass-bright {
      background: rgba(255,255,255,.07);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255,255,255,.12);
    }
  </style>
</head>

<body class="bg-slate-900 text-gray-200 font-sans antialiased min-h-screen flex flex-col selection:bg-cyan-500/30">

  <!-- â•â•â•â•â•â• SHARED NAV â•â•â•â•â•â• -->
  <div id="nav-container"></div>
  <script src="nav.js"></script>

  <!-- spacer for fixed nav -->
  <div class="h-16"></div>


  <!-- â•â•â•â•â•â• MAIN â•â•â•â•â•â• -->
  <main class="flex-1 max-w-7xl w-full mx-auto px-6 pt-4 pb-6">

    <!-- â”€â”€ HEADER ROW: Title left, Stats right â”€â”€ -->
    <div class="flex justify-between items-end w-full mb-6">
      <div class="flex items-center gap-3">
        <h1 class="text-lg font-bold text-white tracking-tight">Release Feed</h1>
        <span class="text-[11px] font-mono text-gray-400" id="release-count"></span>
        <div class="flex items-center gap-2 ml-2">
          <span class="pulse-dot" id="pulse-dot"></span>
          <span class="text-[11px] font-mono text-white/30 tracking-wide" id="sync-time">SYNCING</span>
        </div>
      </div>
      <div class="hidden sm:flex items-center gap-4" id="status-hud">
        <!-- skeleton -->
        <div class="bg-white/[.05] border-l-4 border-l-emerald-500 rounded-sm px-3.5 py-2 w-32 h-14 flex flex-col justify-center"><div class="h-5 w-16 skel mb-1"></div><div class="h-2.5 w-20 skel"></div></div>
        <div class="bg-white/[.05] border-l-4 border-l-blue-500 rounded-sm px-3.5 py-2 w-32 h-14 flex flex-col justify-center"><div class="h-5 w-16 skel mb-1"></div><div class="h-2.5 w-20 skel"></div></div>
        <div class="bg-white/[.05] border-l-4 border-l-purple-500 rounded-sm px-3.5 py-2 w-32 h-14 flex flex-col justify-center"><div class="h-5 w-16 skel mb-1"></div><div class="h-2.5 w-20 skel"></div></div>
      </div>
    </div>

    <!-- â”€â”€ COLUMNS â”€â”€ -->
    <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">

      <!-- â”€â”€ FEED (3/4) â”€â”€ -->
      <div class="lg:col-span-3 min-w-0">

        <!-- Controls -->
        <div class="flex flex-col sm:flex-row items-stretch sm:items-center gap-2 mb-2">
          <div class="relative flex-1 max-w-xs">
            <svg class="absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-white/20 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
            <input type="text" id="search-input" placeholder="Searchâ€¦"
              class="w-full pl-8 pr-3 py-1.5 text-[13px] bg-slate-800/60 border border-white/10 rounded-md text-white placeholder-gray-500 focus:outline-none focus:border-cyan-500/40 transition-colors">
          </div>
          <div class="flex items-center gap-1.5" id="filter-bar">
            <button class="filter-btn active px-2.5 py-1 text-[11px] font-medium rounded-md border border-white/10 transition-all whitespace-nowrap" data-filter="all">All</button>
            <button class="filter-btn px-2.5 py-1 text-[11px] font-medium rounded-md border border-white/10 transition-all whitespace-nowrap" data-filter="game">Games</button>
            <button class="filter-btn px-2.5 py-1 text-[11px] font-medium rounded-md border border-white/10 transition-all whitespace-nowrap" data-filter="update">Updates</button>
            <button class="filter-btn px-2.5 py-1 text-[11px] font-medium rounded-md border border-white/10 transition-all whitespace-nowrap" data-filter="dlc">DLC</button>
            <button class="filter-btn px-2.5 py-1 text-[11px] font-medium rounded-md border border-white/10 transition-all whitespace-nowrap" data-filter="homebrew">Homebrew</button>
          </div>
        </div>

        <!-- Feed list -->
        <div class="glass rounded-md overflow-hidden">
          <div id="releases-list">
            <div id="skeleton-loader">
              <div class="feed-row"><div class="w-8 h-11 rounded skel"></div><div><div class="h-3.5 w-44 skel mb-1.5"></div><div class="h-2.5 w-20 skel"></div></div><div class="col-meta"><div class="h-3 w-20 skel"></div></div><div><div class="h-3 w-10 skel"></div></div></div>
              <div class="feed-row"><div class="w-8 h-11 rounded skel"></div><div><div class="h-3.5 w-56 skel mb-1.5"></div><div class="h-2.5 w-16 skel"></div></div><div class="col-meta"><div class="h-3 w-24 skel"></div></div><div><div class="h-3 w-8  skel"></div></div></div>
              <div class="feed-row"><div class="w-8 h-11 rounded skel"></div><div><div class="h-3.5 w-36 skel mb-1.5"></div><div class="h-2.5 w-24 skel"></div></div><div class="col-meta"><div class="h-3 w-16 skel"></div></div><div><div class="h-3 w-10 skel"></div></div></div>
              <div class="feed-row"><div class="w-8 h-11 rounded skel"></div><div><div class="h-3.5 w-48 skel mb-1.5"></div><div class="h-2.5 w-14 skel"></div></div><div class="col-meta"><div class="h-3 w-20 skel"></div></div><div><div class="h-3 w-12 skel"></div></div></div>
              <div class="feed-row"><div class="w-8 h-11 rounded skel"></div><div><div class="h-3.5 w-40 skel mb-1.5"></div><div class="h-2.5 w-18 skel"></div></div><div class="col-meta"><div class="h-3 w-20 skel"></div></div><div><div class="h-3 w-8  skel"></div></div></div>
              <div class="feed-row"><div class="w-8 h-11 rounded skel"></div><div><div class="h-3.5 w-52 skel mb-1.5"></div><div class="h-2.5 w-20 skel"></div></div><div class="col-meta"><div class="h-3 w-24 skel"></div></div><div><div class="h-3 w-10 skel"></div></div></div>
              <div class="feed-row"><div class="w-8 h-11 rounded skel"></div><div><div class="h-3.5 w-32 skel mb-1.5"></div><div class="h-2.5 w-16 skel"></div></div><div class="col-meta"><div class="h-3 w-20 skel"></div></div><div><div class="h-3 w-12 skel"></div></div></div>
              <div class="feed-row"><div class="w-8 h-11 rounded skel"></div><div><div class="h-3.5 w-44 skel mb-1.5"></div><div class="h-2.5 w-20 skel"></div></div><div class="col-meta"><div class="h-3 w-16 skel"></div></div><div><div class="h-3 w-8  skel"></div></div></div>
            </div>
          </div>
          <div id="empty-state" class="hidden px-6 py-12 text-center">
            <p class="text-[13px] text-white/25">No releases match</p>
          </div>
          <div id="error-state" class="hidden px-6 py-12 text-center">
            <p class="text-[13px] text-white/25">Failed to load data</p>
          </div>
        </div>
      </div>


      <!-- â”€â”€ SIDEBAR (1/4) â”€â”€ -->
      <aside class="lg:col-span-1 space-y-4 lg:mt-[42px]">

        <!-- Update Setup -->
        <div class="rounded-md bg-slate-800/60 border border-white/10 p-3">
          <a href="guide.html" class="flex items-center justify-center w-full py-2 text-[11px] font-semibold uppercase tracking-wider text-black bg-yellow-400 hover:bg-yellow-300 rounded-md transition-colors">
            Update My Setup â†’
          </a>
        </div>

        <!-- Scene News -->
        <div class="glass rounded-md p-4">
          <div class="flex items-center gap-2 mb-3">
            <svg class="w-3 h-3 text-cyan-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
            <span class="text-[11px] font-semibold text-white/50 uppercase tracking-wider">Scene News</span>
          </div>
          <div id="news-list" class="space-y-0 divide-y divide-white/[.05]">
            <div class="py-2"><div class="h-3 w-full skel mb-1"></div><div class="h-2.5 w-16 skel"></div></div>
            <div class="py-2"><div class="h-3 w-4/5 skel mb-1"></div><div class="h-2.5 w-20 skel"></div></div>
            <div class="py-2"><div class="h-3 w-full skel mb-1"></div><div class="h-2.5 w-12 skel"></div></div>
          </div>
        </div>

        <!-- Reddit -->
        <div class="glass rounded-md p-4">
          <div class="flex items-center gap-2 mb-3">
            <svg class="w-3 h-3 text-[#ff6314]" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0A12 12 0 000 12a12 12 0 0012 12 12 12 0 0012-12A12 12 0 0012 0zm5.01 13.38c.15.36.23.75.23 1.14 0 2.42-2.83 4.38-6.32 4.38s-6.32-1.96-6.32-4.38c0-.4.09-.79.24-1.15-.85-.49-1.38-1.4-1.38-2.39 0-1.55 1.25-2.8 2.8-2.8.87 0 1.65.4 2.17 1.02a9.6 9.6 0 012.48-.67V7.53l2.93-.61a.75.75 0 01.87.49l.12.42a.75.75 0 01-.49.87l-2.68.56v.28a9.6 9.6 0 012.48.67 2.8 2.8 0 012.17-1.02c1.55 0 2.8 1.25 2.8 2.8 0 .99-.53 1.9-1.38 2.39zm-8.41.04c0 .78.63 1.41 1.41 1.41s1.41-.63 1.41-1.41-.63-1.41-1.41-1.41-1.41.63-1.41 1.41zm5.18 0c0 .78.63 1.41 1.41 1.41s1.41-.63 1.41-1.41-.63-1.41-1.41-1.41-1.41.63-1.41 1.41zm-4.85 3.61c.26.37.76.57 1.45.57h1.25c.69 0 1.19-.2 1.45-.57a.5.5 0 10-.82-.57c-.06.09-.24.22-.63.22h-1.25c-.39 0-.57-.13-.63-.22a.5.5 0 10-.82.57z"/></svg>
            <span class="text-[11px] font-semibold text-white/50 uppercase tracking-wider">r/SwitchPirates</span>
          </div>
          <div id="reddit-list" class="space-y-0 divide-y divide-white/[.05]">
            <div class="py-2 flex gap-2"><div class="w-7 h-3 skel flex-shrink-0"></div><div class="flex-1"><div class="h-3 w-full skel mb-1"></div><div class="h-3 w-3/4 skel"></div></div></div>
            <div class="py-2 flex gap-2"><div class="w-7 h-3 skel flex-shrink-0"></div><div class="flex-1"><div class="h-3 w-full skel"></div></div></div>
            <div class="py-2 flex gap-2"><div class="w-7 h-3 skel flex-shrink-0"></div><div class="flex-1"><div class="h-3 w-4/5 skel"></div></div></div>
          </div>
        </div>
      </aside>

    </div><!-- /grid -->
  </main>


  <!-- â•â•â•â•â•â• FOOTER â•â•â•â•â•â• -->
  <footer class="border-t border-white/10 py-12">
    <div class="max-w-7xl mx-auto px-6 flex flex-col sm:flex-row items-center justify-between gap-6">
      <div class="flex items-center gap-2">
        <span class="font-mono font-bold text-white">Switch<span class="text-cyan-400">Hack</span></span>
        <span class="text-gray-600 text-sm">&copy; 2026</span>
      </div>
      <div class="flex items-center gap-6 text-sm text-gray-500">
        <a href="index.html" class="hover:text-gray-300 transition-colors">Home</a>
        <a href="guide.html" class="hover:text-gray-300 transition-colors">Guide</a>
        <a href="intel.html" class="hover:text-gray-300 transition-colors">Intel</a>
        <span class="text-gray-300">Monitor</span>
      </div>
    </div>
  </footer>


  <!-- â•â•â•â•â•â• SCRIPT â•â•â•â•â•â• -->
  <script>
  (function() {
    'use strict';

    var LAST_VISIT_KEY = 'switchhack_last_visit';
    var lastVisit = localStorage.getItem(LAST_VISIT_KEY);
    localStorage.setItem(LAST_VISIT_KEY, new Date().toISOString());

    var allReleases = [];
    var activeFilter = 'all';
    var searchQuery = '';

    var statusHud    = document.getElementById('status-hud');
    var syncTime     = document.getElementById('sync-time');
    var pulseDot     = document.getElementById('pulse-dot');
    var releasesList = document.getElementById('releases-list');
    var skeletonLoader = document.getElementById('skeleton-loader');
    var emptyState   = document.getElementById('empty-state');
    var errorState   = document.getElementById('error-state');
    var searchInput  = document.getElementById('search-input');
    var filterBar    = document.getElementById('filter-bar');
    var releaseCount = document.getElementById('release-count');
    var newsList     = document.getElementById('news-list');
    var redditList   = document.getElementById('reddit-list');


    /* â”€â”€ helpers â”€â”€ */

    function timeAgo(iso) {
      var s = Math.floor((Date.now() - new Date(iso).getTime()) / 1000);
      if (s < 60)    return 'now';
      if (s < 3600)  return Math.floor(s / 60) + 'm';
      if (s < 86400) return Math.floor(s / 3600) + 'h';
      if (s < 604800) return Math.floor(s / 86400) + 'd';
      return new Date(iso).toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
    }

    function isNew(iso) {
      var t = new Date(iso).getTime();
      return lastVisit ? t > new Date(lastVisit).getTime() : (Date.now() - t) < 86400000;
    }

    function fmtUp(n) { return n >= 1000 ? (n / 1000).toFixed(1).replace(/\.0$/, '') + 'k' : String(n); }


    /* â”€â”€ badge palette â”€â”€ */

    var badge = {
      game:     { label: 'Game',     bg: '#059669', fg: '#fff' },
      update:   { label: 'Update',   bg: '#2563eb', fg: '#fff' },
      dlc:      { label: 'DLC',      bg: '#d97706', fg: '#fff' },
      homebrew: { label: 'Homebrew', bg: '#7c3aed', fg: '#fff' }
    };


    /* â”€â”€ render: HUD strip â”€â”€ */

    function renderMeta(stats) {
      if (!stats) return;
      var riskClass = stats.threat_level === 'Danger' ? 'risk-critical' : stats.threat_level === 'Caution' ? 'risk-warning' : 'risk-safe';
      var cards = [
        { label: 'FIRMWARE',   ver: stats.firmware.version,   border: 'border-l-emerald-500' },
        { label: 'ATMOSPHERE', ver: stats.atmosphere.version, border: 'border-l-blue-500' },
        { label: 'HEKATE',     ver: stats.hekate.version,     border: 'border-l-purple-500' }
      ];
      var h = '';
      // threat level chip
      h += '<div class="flex items-center gap-1.5 px-3 py-1.5 rounded-md border text-[11px] font-bold uppercase tracking-wider ' + riskClass + '">';
      h += '<span class="w-2 h-2 rounded-full" style="background:currentColor"></span>' + stats.threat_level + '</div>';
      cards.forEach(function(c) {
        h += '<div class="bg-white/[.05] border-l-4 ' + c.border + ' rounded-sm px-3.5 py-2 w-32 h-14 flex flex-col justify-center">';
        h += '<div class="text-lg font-bold text-white leading-tight tracking-tight">' + c.ver + '</div>';
        h += '<div class="text-[10px] font-mono font-semibold text-gray-500 uppercase tracking-[.12em]">' + c.label + '</div>';
        h += '</div>';
      });
      statusHud.innerHTML = h;
    }


    /* â”€â”€ render: sync â”€â”€ */

    function renderSync(iso) {
      if (!iso) { syncTime.textContent = 'OFFLINE'; pulseDot.style.background = '#ef4444'; pulseDot.style.animation = 'none'; return; }
      syncTime.textContent = timeAgo(iso);
    }


    /* â”€â”€ render: feed â”€â”€ */

    function renderReleases() {
      var list = allReleases.filter(function(r) {
        return (activeFilter === 'all' || r.type === activeFilter) &&
               (!searchQuery || r.title.toLowerCase().indexOf(searchQuery) !== -1);
      });
      releaseCount.textContent = list.length + ' / ' + allReleases.length;

      if (!list.length) { emptyState.classList.remove('hidden'); releasesList.innerHTML = ''; return; }
      emptyState.classList.add('hidden');

      var h = '';
      list.forEach(function(r) {
        var b = badge[r.type] || badge.game;
        var fresh = isNew(r.timestamp);
        var riskCls = r.risk === 'Danger' ? 'risk-critical' : r.risk === 'Caution' ? 'risk-warning' : 'risk-safe';

        h += '<div class="feed-row hover:bg-white/[.07] transition-colors' + (fresh ? ' row-new' : '') + '">';

        // poster
        h += '<div class="w-8 h-11 rounded bg-white/[.06] border border-white/10 flex-shrink-0"></div>';

        // title cell
        h += '<div class="min-w-0 title-cell relative"';
        if (r.titleId) h += ' data-tid="' + r.titleId + '" onclick="copyTid(this)" style="cursor:pointer"';
        h += '>';
        h += '<div class="flex items-center gap-2">';
        h += '<span class="text-[13px] font-medium text-white truncate">' + r.title + '</span>';
        h += '<span class="inline-flex items-center px-1.5 py-px rounded-sm text-[10px] font-semibold uppercase leading-none flex-shrink-0" style="color:' + b.fg + ';background:' + b.bg + '">' + b.label + '</span>';
        h += '<span class="inline-flex items-center px-1.5 py-px rounded-sm border text-[9px] font-bold uppercase leading-none flex-shrink-0 ' + riskCls + '">' + r.risk + '</span>';
        if (fresh) h += '<span class="w-1.5 h-1.5 rounded-full bg-cyan-400 flex-shrink-0"></span>';
        h += '</div>';
        h += '<span class="text-[11px] font-mono text-gray-400">' + r.version + '</span>';
        if (r.titleId) h += '<span class="tip absolute bottom-full left-0 mb-1 px-2 py-1 text-[10px] font-mono bg-black text-cyan-400 border border-white/10 rounded-md whitespace-nowrap pointer-events-none z-20">' + r.titleId + '</span>';
        h += '</div>';

        // meta
        h += '<div class="col-meta text-right"><span class="text-[11px] font-mono text-gray-400">' + r.region + ' Â· ' + r.size + '</span></div>';

        // time
        h += '<div class="text-right"><span class="text-[11px] font-mono text-gray-400">' + timeAgo(r.timestamp) + '</span></div>';

        h += '</div>';
      });
      releasesList.innerHTML = h;
    }


    /* â”€â”€ render: news â”€â”€ */

    function renderNews(news) {
      if (!news || !news.length) { newsList.innerHTML = '<p class="py-3 text-[12px] text-white/20 text-center">No news</p>'; return; }
      var h = '';
      news.forEach(function(n) {
        h += '<a href="' + (n.url || '#') + '" class="flex items-baseline justify-between py-2.5 group">';
        h += '<span class="text-[12px] text-gray-300 group-hover:text-white transition-colors truncate mr-3">' + n.headline + '</span>';
        h += '<span class="text-[10px] font-mono text-gray-500 flex-shrink-0">' + timeAgo(n.timestamp) + '</span>';
        h += '</a>';
      });
      newsList.innerHTML = h;
    }


    /* â”€â”€ render: reddit â”€â”€ */

    function renderReddit(posts) {
      if (!posts || !posts.length) { redditList.innerHTML = '<p class="py-3 text-[12px] text-white/20 text-center">No posts</p>'; return; }
      var h = '';
      posts.forEach(function(p) {
        h += '<a href="' + (p.url || '#') + '" class="flex items-start gap-2.5 py-2.5 group">';
        h += '<span class="text-[11px] font-mono font-semibold text-[#ff6314] w-7 flex-shrink-0 text-right pt-px">' + fmtUp(p.upvotes) + '</span>';
        h += '<span class="text-[12px] text-gray-300 group-hover:text-white transition-colors leading-snug line-clamp-2">' + p.title + '</span>';
        h += '</a>';
      });
      redditList.innerHTML = h;
    }


    /* â”€â”€ events â”€â”€ */

    searchInput.addEventListener('input', function() { searchQuery = this.value.trim().toLowerCase(); renderReleases(); });

    filterBar.addEventListener('click', function(e) {
      var btn = e.target.closest('.filter-btn');
      if (!btn) return;
      filterBar.querySelectorAll('.filter-btn').forEach(function(b) {
        b.style.background = 'transparent'; b.style.color = 'rgba(156,163,175,1)'; b.style.borderColor = 'rgba(255,255,255,.1)';
      });
      btn.style.background = 'rgba(255,255,255,.1)'; btn.style.color = 'rgba(255,255,255,.9)'; btn.style.borderColor = 'rgba(255,255,255,.15)';
      activeFilter = btn.dataset.filter;
      renderReleases();
    });

    // init filter styles
    filterBar.querySelectorAll('.filter-btn').forEach(function(b) {
      if (b.classList.contains('active')) {
        b.style.background = 'rgba(255,255,255,.1)'; b.style.color = 'rgba(255,255,255,.9)'; b.style.borderColor = 'rgba(255,255,255,.15)';
      } else {
        b.style.color = 'rgba(156,163,175,1)';
      }
    });


    /* â”€â”€ copy title id â”€â”€ */

    window.copyTid = function(el) {
      var tid = el.dataset.tid;
      if (!tid) return;
      navigator.clipboard.writeText(tid).then(function() {
        var t = el.querySelector('.tip');
        if (t) { var o = t.textContent; t.textContent = 'COPIED'; t.style.color = '#00e461'; t.style.visibility = 'visible'; t.style.opacity = '1';
          setTimeout(function() { t.textContent = o; t.style.color = ''; t.style.visibility = ''; t.style.opacity = ''; }, 800);
        }
      });
    };


    /* â”€â”€ fetch â”€â”€ */

    fetch('monitor_data.json').then(function(r) {
      if (!r.ok) throw 0; return r.json();
    }).then(function(d) {
      if (skeletonLoader) skeletonLoader.remove();
      renderMeta(d.dashboard_stats);
      renderSync(d.dashboard_stats ? d.dashboard_stats.lastSync : null);
      allReleases = d.articles || [];
      renderReleases();
      renderNews(d.news);
      renderReddit(d.reddit);
    }).catch(function() {
      if (skeletonLoader) skeletonLoader.remove();
      errorState.classList.remove('hidden');
      syncTime.textContent = 'OFFLINE';
      pulseDot.style.background = '#ef4444'; pulseDot.style.animation = 'none';
      newsList.innerHTML = '<p class="py-3 text-[12px] text-white/20 text-center">Unavailable</p>';
      redditList.innerHTML = '<p class="py-3 text-[12px] text-white/20 text-center">Unavailable</p>';
    });

  })();
  </script>

</body>
</html>
